<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Class 2027 - Answer Sheet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <span>Paper Class</span>
            </div>
            <div class="auth-buttons">
                <button class="btn btn-outline" onclick="window.location.href='admin.html'">Admin Login</button>
                <button class="btn btn-primary">Student Register</button>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <div class="banner">
            <div class="banner-image">
                <img src="https://via.placeholder.com/1200x300" alt="Paper Class Banner">
            </div>
            <div class="banner-text">
                <h1>Paper Class 2027</h1>
                <p>Submit your answers for evaluation</p>
            </div>
        </div>

        <div class="paper-info">
            <div class="paper-info-item">
                <span class="paper-info-label">Year:</span>
                <span class="paper-info-value" id="paperYear">2027</span>
            </div>
            <div class="paper-info-item">
                <span class="paper-info-label">Paper No:</span>
                <span class="paper-info-value" id="paperNumber">01</span>
            </div>
            <div class="paper-info-item">
                <span class="paper-info-label">Subject:</span>
                <span class="paper-info-value" id="paperSubject">Mathematics</span>
            </div>
        </div>

        <div class="form-container">
            <form id="answerSheetForm">
                <!-- Personal info fields -->
                <div class="form-group">
                    <label for="name">Your Name</label>
                    <input type="text" id="name" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="school">Your School</label>
                    <input type="text" id="school" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="micNumber">Your MIC Number</label>
                    <input type="text" id="micNumber" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="contactNumber">Your Contact Number</label>
                    <input type="tel" id="contactNumber" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Your Medium</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="sinhala" name="medium" value="Sinhala" required>
                            <label for="sinhala">Sinhala</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="english" name="medium" value="English">
                            <label for="english">English</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="district">Your District</label>
                    <select id="district" class="form-control" required>
                        <option value="">Select District</option>
                        <option value="Colombo" selected>Colombo</option>
                        <option value="Gampaha">Gampaha</option>
                        <option value="Kalutara">Kalutara</option>
                        <option value="Kandy">Kandy</option>
                        <option value="Matale">Matale</option>
                        <option value="Galle">Galle</option>
                        <option value="Matara">Matara</option>
                        <option value="Hambantota">Hambantota</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="class">Your Class</label>
                    <select id="class" class="form-control" required>
                        <option value="">Select Class</option>
                        <option value="Nugegoda" selected>Nugegoda</option>
                        <option value="Colombo 01">Colombo 01</option>
                        <option value="Colombo 02">Colombo 02</option>
                        <option value="Colombo 03">Colombo 03</option>
                        <option value="Colombo 04">Colombo 04</option>
                        <option value="Colombo 05">Colombo 05</option>
                        <option value="Colombo 06">Colombo 06</option>
                        <option value="Colombo 07">Colombo 07</option>
                    </select>
                </div>

                <h2 class="answers-title">Your Answers</h2>

                <div class="answers-grid" id="answersContainer">
                    <!-- Answers will be generated by JavaScript -->
                </div>

                <button type="submit" class="btn btn-primary submit-btn">Submit Answers</button>
            </form>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="script.js"></script>
    <script>
        // Fetch paper details from Firebase
        function fetchPaperDetails() {
            const paperId = new URLSearchParams(window.location.search).get('paperId') || 'defaultPaper';
            
            database.ref('papers/' + paperId).once('value').then((snapshot) => {
                const paperData = snapshot.val();
                if (paperData) {
                    document.getElementById('paperYear').textContent = paperData.year;
                    document.getElementById('paperNumber').textContent = paperData.paperNumber;
                    document.getElementById('paperSubject').textContent = paperData.subject;
                    
                    // Generate answer items based on question count
                    generateAnswerItems(paperData.questions || 15);
                }
            });
        }

        // Modified to accept question count
        function generateAnswerItems(questionCount) {
            let html = '';
            for (let i = 1; i <= questionCount; i++) {
                html += `
                    <div class="answer-item">
                        <h3>Question ${i}</h3>
                        <div class="rating-options">
                            <div class="rating-option">
                                <input type="radio" id="q${i}-1" name="q${i}" value="1.0" required>
                                <label for="q${i}-1">1.0</label>
                            </div>
                            <!-- Other options remain same -->
                        </div>
                    </div>
                `;
            }
            answersContainer.innerHTML = html;
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetchPaperDetails();
            checkTheme();
        });
    </script>
    <script src="main.js"></script>
</body>
</html>